(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{54:function(e,t,n){e.exports=n(98)},59:function(e,t,n){},61:function(e,t,n){},95:function(e,t){},98:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(49),r=n.n(c),i=(n(59),n(10)),s=n(11),l=n(13),d=n(12),u=n(14),m=(n(61),n(5)),h=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={endpoint:"https://videostreamtestwebrtc.herokuapp.com/"},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(m.a,{to:"/Broadcast"},"Broadcast")),o.a.createElement("li",null,o.a.createElement(m.a,{to:"/Watch"},"Watch"))))}}]),t}(a.Component),f=n(15),p=n.n(f),b=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).send=function(){p()(n.state.endpoint).emit("broadcaster")},n.state={endpoint:"https://videostreamtestwebrtc.herokuapp.com",peerConnections:{},config:{iceServers:[{urls:["stun:stun.l.google.com:19302"]}]}},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.startGetUserMedia()}},{key:"render",value:function(){var e={},t=p()(this.state.endpoint);return t.on("watcher",function(n){var a=new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302"]}]});e[n]=a,console.log("id of the peer"+e[n]),a.addStream(document.querySelector("video").srcObject),a.createOffer().then(function(e){return a.setLocalDescription(e)}).then(function(){t.emit("offer",n,a.localDescription)}),a.onicecandidate=function(e){e.candidate&&t.emit("candidate",n,e.candidate)}}),t.on("answer",function(t,n){e[t].setRemoteDescription(n)}),t.on("candidated",function(t,n){e[t].addIceCandidate(new RTCIceCandidate(n))}),o.a.createElement("div",null,"I am the broadcaster",o.a.createElement("h1",null,"Realtime communication with WebRTC"),o.a.createElement("video",{autoPlay:!0,playsInline:!0}),o.a.createElement("div",null))}}]),t}(a.Component),v=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).send=function(){p()(n.state.endpoint)},n.state={endpoint:"https://videostreamtestwebrtc.herokuapp.com"},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=p()(this.state.endpoint);return t.on("broadcaster",function(){console.log("got broadcaster"),t.emit("watcher")}),t.on("connect",function(){console.log("watcher by connect"),t.emit("watcher")}),t.on("offer",function(n,a){console.log("came offer"),(e=new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302"]}]})).setRemoteDescription(a).then(function(){return e.createAnswer()}).then(function(t){return e.setLocalDescription(t)}).then(function(){t.emit("answer",n,e.localDescription)}),e.onaddstream=function(e){document.querySelector("video").srcObject=e.stream},e.onicecandidate=function(e){e.candidate&&t.emit("candidated",n,e.candidate)}}),t.on("candidate",function(t,n){e.addIceCandidate(new RTCIceCandidate(n)).catch(function(e){return console.error(e)})}),o.a.createElement("div",null," I am the watcher",o.a.createElement("div",null,o.a.createElement("video",{autoPlay:!0,playsInline:!0})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(m.c,{history:m.d},o.a.createElement(m.b,{path:"/",component:h}),o.a.createElement(m.b,{path:"/Broadcast",component:b}),o.a.createElement(m.b,{path:"/Watch",component:v})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[54,2,1]]]);
//# sourceMappingURL=main.c808c669.chunk.js.map